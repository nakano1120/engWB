<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>English word battle</title>
    <style>
        body{
            background-color:#eeeeee;
        }
        .place{
            text-align:left;
            background-color:#ffffff;
            border-radius: 10px;
            border:5px solid #111111;
        }
        progress{
            width:100%;
        }
        .big{
            font-size:150%;
        }
    </style>
</head>
<body>
    <div id="start">
    1P名前<input type="text" id="monster0" value="たろう">
    2P名前<input type="text" id="monster3" value="じろう">
    <input type="button" id="startbutton" value="開始Lv1" onclick="start(1)">
    <input type="button" id="startbutton2" value="開始Lv2" onclick="start(2)">
    <input type="button" id="startbutton3" value="開始Lv3" onclick="start(3)">
    <input type="button" id="battlebutton" value="戦う" onclick="battle()" disabled><br>
    </div>
    <br><br><br><br>
    <div class="place" id="myprace">
        <span class="big" id="p1monster">たろう</span> LV50<br>HP <span class="allright" id="textHP1">300/300</span>
        <progress id="progresshp1" max="100" value="100"></progress>
    </div><br><br><br>
    <div class="place" id="enemyprace">
        <span class="big" id="p2monster">じろう</span> LV50<br>HP <span class="allright" id="textHP2">300/300</span>
        <progress id="progresshp2" max="100" value="100"></progress>
    </div><br>
    <script>
        let name1 = "たろう"
        let name2 = "じろう"
        const type = ["ほのお","みず","しぜん","ひかり","やみ"]
        const japtango = ["りんご","星","切る"]
        const engtango = ["apple","star","cut"]
        let maxHP1 = 300
        let maxHP2 = 300
        let HP1 = 300
        let HP2 = 300
        let type1 = 0
        let type2 = 0
        let turn = 1;
        let nowmonster1 = 0;
        let nowmonster2 = 0;
        let damege = 0;
        let seiko = 50
        function start(level){
            document.getElementById("startbutton").disabled = true;
            document.getElementById("startbutton2").disabled = true;
            document.getElementById("startbutton3").disabled = true;
            document.getElementById("battlebutton").disabled = false;
            name1 = document.getElementById("monster0").value
            name2 = document.getElementById("monster3").value
            maxHP1 = 300
            maxHP2 = 300
            HP1 = 300
            HP2 = 300
            seiko=30+(level*10)
            nowdraw();
        }
        function nowdraw(){
            document.getElementById("p1monster").innerHTML = name1
            document.getElementById("p2monster").innerHTML = name2
            document.getElementById("progresshp1").max = maxHP1
            document.getElementById("progresshp2").max = maxHP2
            document.getElementById("progresshp1").value = HP1
            document.getElementById("progresshp2").value = HP2
            document.getElementById("textHP1").innerHTML = HP1 +"/"+ maxHP1
            document.getElementById("textHP2").innerHTML = HP2 +"/"+ maxHP2
        }
        function battle(){
            if(HP1<1 || HP2<1){
                return
            }
            alert(turn+"Pのターンです　次の日本語を英単語にしなさい")
            let random = Math.floor(Math.random() * engtango.length)
            let plusdam = Math.floor(Math.random() * 10)
            if(turn==1){
                alert(name1+"の攻撃！")
                let answer = window.prompt(japtango[random])
                if(answer==engtango[random]){
                    alert("うまく決まった！")
                    damage=engtango[random].length*10+plusdam
                    HP2-=damage
                    alert(damage+"ダメージを与えた")
                }else{
                    alert("しかし　うまく決まらなかった！")
                    alert("正解は "+engtango[random])
                }
            }else{
                alert(name2+"の攻撃！")
                let cpu = Math.floor(Math.random() * 100)
                if(cpu<seiko){
                    alert("相手の攻撃がうまく決まった！")
                    damage=engtango[random].length*10+plusdam
                    HP1-=damage
                    alert(damage+"ダメージを受けた！")
                }else{
                    alert("しかし　うまく決まらなかった！")
                }
            }
            

            if(HP1<1 || HP2<1){
                alert("ゲームセット！")
                document.getElementById("startbutton").disabled = false;
                document.getElementById("startbutton2").disabled = false;
                document.getElementById("startbutton3").disabled = false;
                document.getElementById("battlebutton").disabled = true;
            }
            nowdraw()
            if(turn==1){
                turn=2
            }else if(turn==2){
                turn=1
            }
        }
    </script>
</body>
</html>